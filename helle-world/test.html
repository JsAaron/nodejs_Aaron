<!doctype html>
<html>
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
	<title>样式操作</title>

<style type="text/css">

ul {
list-style: none;
margin: 0;
padding-left: 5px;
margin-left: 5px;
margin-bottom: 10px;
font-size: 12px;
}

.menuAaron {
	padding: 12px;
	position: fixed;
	margin: 0;
	top: 120px;
	right: 20px;
	text-align: left;
	font-size: 12px;
	background: white;
	border: 1px solid #ccc;
	border-radius: 10px;
}
#menuset {
text-align: right;
}
#menuset a {
padding: 0 2px;
}

li.__h1 {
font-size: 14px;
padding: 5px 0;
}

li {
display: list-item;
text-align: -webkit-match-parent;
}

a:visited {
color: #1a8bc8;
text-decoration: none;
}
a:link, a:active {
color: #1a8bc8;
text-decoration: none;
}

a{
	width: 46px;
height: 46px;
bottom: 20px;
right: 20px;
background: #1f7b9b url(http://images.cnblogs.com/cnblogs_com/twobin/520730/o_icon.png) no-repeat 8px -150px;
color: #fff;
font-size: 14px;
font-weight: bold;
font-family: sans-serif;
text-decoration: none;
opacity: .9
}
</style>


</head>
<body>

<a id="scrollUp" href="#top" title="回到顶部" style="position: fixed; z-index: 2147483647; display: block;"></a>




		<li class="forTitles __h1">
			<a href="#_h1_0">1.前言</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_1">2.定位</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_2">3.web App优势</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_3">4.无编程开发</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_4">5.项目复杂吗</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_5">6.实现的功能</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_6">7.关于设计</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_7">8.关于优化</a>
		</li>
		<li class="forTitles __h1">		<li class="forTitles __h1">
			<a href="#_h1_0">1.前言</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_1">2.定位</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_2">3.web App优势</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_3">4.无编程开发</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_4">5.项目复杂吗</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_5">6.实现的功能</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_6">7.关于设计</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_7">8.关于优化</a>
		</li>
		<li class="forTitles __h1">
<h1>0</h1>
	<ul id="menumain">
		<li class="forTitles __h1">
			<a href="#_h1_0">1.前言</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_1">2.定位</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_2">3.web App优势</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_3">4.无编程开发</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_4">5.项目复杂吗</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_5">6.实现的功能</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_6">7.关于设计</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_7">8.关于优化</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_8">9.结尾</a>
		</li>
	</ul>	

<h1>1</h1>
	<ul id="menumain">
		<li class="forTitles __h1">
			<a href="#_h1_0">1.前言</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_1">2.定位</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_2">3.web App优势</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_3">4.无编程开发</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_4">5.项目复杂吗</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_5">6.实现的功能</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_6">7.关于设计</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_7">8.关于优化</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_8">9.结尾</a>
		</li>
	</ul>	

	<h1>2</h1>
	<ul id="menumain">
		<li class="forTitles __h1">
			<a href="#_h1_0">1.前言</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_1">2.定位</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_2">3.web App优势</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_3">4.无编程开发</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_4">5.项目复杂吗</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_5">6.实现的功能</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_6">7.关于设计</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_7">8.关于优化</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_8">9.结尾</a>
		</li>
	</ul>	

	<h1>3</h1>
	<ul id="menumain">
		<li class="forTitles __h1">
			<a href="#_h1_0">1.前言</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_1">2.定位</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_2">3.web App优势</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_3">4.无编程开发</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_4">5.项目复杂吗</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_5">6.实现的功能</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_6">7.关于设计</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_7">8.关于优化</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_8">9.结尾</a>
		</li>
	</ul>	


	<h1>4</h1>
	<ul id="menumain">
		<li class="forTitles __h1">
			<a href="#_h1_0">1.前言</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_1">2.定位</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_2">3.web App优势</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_3">4.无编程开发</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_4">5.项目复杂吗</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_5">6.实现的功能</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_6">7.关于设计</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_7">8.关于优化</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_8">9.结尾</a>
		</li>
	</ul>	




<div class="menuAaron">

	<div id="menuset">
		<a id="menuclose">隐藏导航</a>
		<a id="menuopen" style="display:none">显示导航</a>
	</div>

	<ul id="menumain">
		<li class="forTitles __h1">
			<a href="#_h1_0">1.前言</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_1">2.定位</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_2">3.web App优势</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_3">4.无编程开发</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_4">5.项目复杂吗</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_5">6.实现的功能</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_6">7.关于设计</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_7">8.关于优化</a>
		</li>
		<li class="forTitles __h1">
			<a href="#_h1_8">9.结尾</a>
		</li>
	</ul>
</div>




<script type="text/javascript">


	(function() {
		var body = $('#cnblogs_post_body');
		var hs = body.find('h1, h2');
		hs.append($('<a class="forTitles"></a>'));
		body.find("ul li").css('fontSize', '15px');
		var forTitles = body.find('.forTitles');
		$.each(forTitles, function(i, item) {
			var el = $(this);
			var pEl = el.parent();
			var nodeName = pEl[0].tagName;
			if (nodeName == 'H1') {
				el.addClass('__h1');
				el.attr('name', '_h1_' + i);
			} else if (nodeName == 'H2') {
				el.addClass('__h2');
				el.attr('name', '_h2_' + i);
			}
		})

		var menuAaron = $('<div class="menuAaron">')
		var menuset = $('<div id="menuset">' +
			'<a id="menuclose">隐藏导航</a>' +
			'<a id="menuopen" style="display:none">显示导航</a>' +
			'</div>');
		var list = $('<ul id="menumain"></ul>');

		var menuli = [];
		$.each(forTitles, function(i, item) {
			var el = $(this);
			var pEl = el.parent();
			pEl.before(el);
			var li = $('<li class="' + el.attr('class') + '"><a  href="#' + el.attr('name') + '" >' + (i + 1) + '.' + pEl.text() + '</a>');
			menuli.push(li)
			list.append(li);
		});
		menuAaron.append(menuset);
		menuAaron.append(list);
		body.before(menuAaron);


		var offsetMenu = [];
		var preValue;
		$.each(forTitles,function(index, ele) {
			offsetMenu.push({
				i: index,
				value:  $(ele).offset().top
			})
		})
		function setMenu() {
			var scrollTop = $(window).scrollTop();
			if (scrollTop === 0) {
				setli(0)
				return;
			}
		if(scrollTop < offsetMenu[0].value){
			setli(0)
			return
		}
		if(scrollTop > offsetMenu[offsetMenu.length-1].value){
			setli(offsetMenu.length)
			return
		}
			for (var i = 0; i < offsetMenu.length; i++) {
				var li = offsetMenu[i]
				var value = li.value;
				if (scrollTop > value && scrollTop < offsetMenu[i + 1].value) {
					setli(i)
				} else {
					removeli(i)
				}
			}
		}
		function setli(index) {
		  menuli[index][0].firstChild.style.color= '#FF3300'

		}

		function removeli(index) {
		  menuli[index][0].firstChild.style.color= ''
		}

		$(window).scroll(function(event) {
			setMenu();
		});
		setMenu();
	})();







	var offsetMenu = [];

	$("h1").each(function(index,ele){

		offsetMenu.push({
			elem: ele,
			i: index,
			value: $(ele).offset().top,
			height: $(ele).height()
		})
	})


	var preValue;


	function setMenu(){
		var scrollTop = $(window).scrollTop();
		if(scrollTop === 0){
			setli(0)
			return;
		}
		if(scrollTop < offsetMenu[0].value){
			setli(0)
			return
		}
		if(scrollTop > offsetMenu[offsetMenu.length-1].value){
			setli(offsetMenu.length)
			return
		}
		for (var i = 0; i < offsetMenu.length; i++) {
			var li = offsetMenu[i]
			var value = li.value;
			if (scrollTop > value && scrollTop < offsetMenu[i + 1].value) {
				setli(i,offsetMenu[i].elem)
			}else{
				removeli(offsetMenu[i].elem)
			}
		}
	}

	function setli(index,elem){
		elem.style.color = "#FF3300";
	}

	function removeli(elem){
		elem.style.color = ""
	}

	$(window).scroll(function(event) {
		setMenu();
	});

	setMenu();



	setTimeout(function() {
		$(".catListTitle").each(function(index, ele) {
			if (/随笔档案/.test($(ele).text())) {
				$(ele).remove();
			}
		})

		$("#menuclose").click(function() {
			$("#menumain").hide()
			$(this).hide();
			$("#menuopen").show();
			$(".menuAaron").animate({
				'right': '-40'
			})
		})

		$("#menuopen").click(function() {
			$("#menumain").show()
			$(this).hide();
			$("#menuclose").show();
			$(".menuAaron").animate({
				'right': '20'
			})
		})
	}, 500)

</script>

</body>
</html>

